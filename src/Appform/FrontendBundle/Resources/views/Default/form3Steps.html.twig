{% extends "AppformFrontendBundle::layout.html.twig" %}
{% form_theme form 'AppformFrontendBundle:Form:fields.html.twig' %}

{% block title %}Moreinfo Application Form{% endblock %}

{% block stylesheets %}
	{% stylesheets
	'@AppformFrontendBundle/Resources/public/form/css/*'
	%}
	<link type="text/css" rel="stylesheet" href="{{ asset_url }}">
	{% endstylesheets %}
{% endblock %}

{% block javascripts %}
	{% javascripts
	'@AppformFrontendBundle/Resources/public/form/js/jquery.1.11.1.min.js'
	'@AppformFrontendBundle/Resources/public/form/js/jquery.ui.min.js'
	'@AppformFrontendBundle/Resources/public/form/js/jquery.validate.min.js'
	'@AppformFrontendBundle/Resources/public/form/js/additional-methods.min.js'
	'@AppformFrontendBundle/Resources/public/form/js/jquery.form.min.js'
	'@AppformFrontendBundle/Resources/public/form/js/j-forms-3.js'
	'@AppformFrontendBundle/Resources/public/form/js/chosen.jquery.min.js'
	'@AppformFrontendBundle/Resources/public/form/js/jquery.maskedinput.min.js'
	%}
	<script type="text/javascript" src="{{ asset_url }}"></script>
	{% endjavascripts %}
{% endblock %}

{% block content %}
	<div class="wrapper wrapper-640">
		<form action="{{ url('appform_frontend_apply') }}" method="post" class="j-forms j-multistep" id="j-forms" {{ form_enctype(form) }} novalidate>
			{{ form_errors(form) }}
			{{ form_widget(form.appOrigin) }}
			<div class="header">
				<h1>More Information Request</h1>
				<h3>HCEN’s Client Network of Nationwide Staffing Agencies</h3>
			</div>
			<div class="content">
				<div class="j-row" style="display:none;">
					<div class="span4 step">
						<div class="steps">
							<p>Personal info</p>
						</div>
					</div>
					<div class="span4 step">
						<div class="steps">
							<p>Additional info</p>
						</div>
					</div>
					<div class="span4 step">
						<div class="steps">
							<p>Info Request</p>
						</div>
					</div>
				</div>
				<fieldset>
					<div class="j-row">
						<div class="span6 unit">
							<div class="input">
								<label class="icon-left" for="appform_frontendbundle_applicant[firstName]">
									<i class="fa fa-user"></i>
								</label>
								{{ form_widget(form.firstName) }}
							</div>
						</div>
						<div class="span6 unit">
							<div class="input">
								<label class="icon-left" for="appform_frontendbundle_applicant[lastName]">
									<i class="fa fa-user"></i>
								</label>
								{{ form_widget(form.lastName) }}
							</div>
						</div>
					</div>
					<div class="j-row">
						<div class="span6 unit">
							<div class="input">
								<label class="icon-left" for="email">
									<i class="fa fa-envelope-o"></i>
								</label>
								{{ form_widget(form.email) }}
							</div>
						</div>
						<div class="unit span6">
						<div class="input">
							<label class="icon-left" for="subject">
								<i class="fa fa-mobile"></i>
							</label>
							{{ form_widget(form.personalInformation.phone) }}
						</div>
					</div>
					</div>
					<div class="j-row">
						<div class="unit span6">
							<div class="input">
								<label class="icon-left" for="subject">
									<i class="fa fa-map-marker"></i>
								</label>
								{{ form_widget(form.personalInformation.state) }}
							</div>
						</div>
					</div>
				</fieldset>
				<fieldset>
					<div class="j-row">
						<div class="unit span6">
							<div class="input">
								<label class="icon-right" for="subject">
									<i class="fa fa-user-md"></i>
								</label>
								{{ form_widget(form.personalInformation.discipline) }}
							</div>
						</div>
						<div class="unit span6">
							<div class="input select">
								{{ form_widget(form.personalInformation.licenseState, {'attr': {'data-placeholder' : "* License State(s)"}}) }}
								<span class="tooltip tooltip-right-top">Select License State(s)</span>
								<i></i>
							</div>
						</div>
					</div>
					<div class="j-row">
						<div class="unit span6">
							<div class="input">
								<label class="icon-right" for="subject">
									<i class="fa fa-graduation-cap"></i>
								</label>
								{{ form_widget(form.personalInformation.specialtyPrimary) }}
							</div>
						</div>
						<div class="unit span6">
							<div class="input">
								<label class="icon-right" for="subject">
									<i class="fa fa-stethoscope"></i>
								</label>
								{{ form_widget(form.personalInformation.yearsLicenceSp) }}
							</div>
						</div>
					</div>
					<div class="j-row">
						<div class="unit span6">
							<div class="input">
								<label class="icon-right" for="subject">
									<i class="fa fa-graduation-cap"></i>
								</label>
								{{ form_widget(form.personalInformation.specialtySecondary, {'attr': {'placeholder': 'Secondary Specialty'}}) }}
							</div>
						</div>
						<div class="unit span6">
							<div class="input">
								<label class="icon-right" for="subject">
									<i class="fa fa-stethoscope"></i>
								</label>
								{{ form_widget(form.personalInformation.yearsLicenceSs) }}
							</div>
						</div>
					</div>
				</fieldset>
				<fieldset>
					<div class="j-row">
						<div class="unit span6">
							<div class="input">
								<label class="icon-right" for="subject">
									<i class="fa fa-check"></i>
								</label>
								{{ form_widget(form.personalInformation.isExperiencedTraveler) }}
							</div>
						</div>
						<div class="unit span6">
							<div class="input select">
								{{ form_widget(form.personalInformation.desiredAssignementState, {'attr': {'data-placeholder' : "* Destination State(s)"}}) }}
								<span class="tooltip tooltip-right-top">Select Desired Assignment State(s)</span>
								<i></i>
							</div>
						</div>
					</div>
					<div class="j-row">
						<div class="unit span6">
							<div class="input">
								<label class="icon-right" for="subject">
									<i class="fa fa-medkit"></i>
								</label>
								{{ form_widget(form.personalInformation.isOnAssignement) }}
							</div>
						</div>
						<div class="span6 unit">
							<div class="input disabled-view">
								<label class="icon-right" for="appform_frontendbundle_applicant_personalInformation_completion">
									<i class="fa fa-calendar"></i>
								</label>
								{{ form_widget(form.personalInformation.completion, {'attr': {'placeholder': 'Completion Date'}}) }}
							</div>
						</div>
					</div>
					<div class="j-row">
						<div class="unit span6">
							<div class="input">
								<label class="icon-right" for="last_name">
									<i class="fa fa-user"></i>
								</label>
								{{ form_widget(form.personalInformation.assignementTime) }}
							</div>
						</div>
						<div class="span6 unit">
							<label class="input append-big-btn">
								<label class="icon-left" for="file_input">
									<i class="fa fa-download"></i>
								</label>
								<div class="file-button">
									Browse
									{{ form_widget(form.document) }}
								</div>
								<input type="text" id="file_input" readonly="" placeholder="Resume/CV">
								<span class="hint">(Optional) Only: doc, docx, pdf</span>
								<script>
									$('#appform_frontendbundle_applicant_document_file').change(function() {
										$('#file_input').val(this.value);
									});
								</script>
							</label>
						</div>
					</div>
					<div id="response"></div>
				</fieldset>
			</div>
			<!-- end /.content -->
			<div class="footer">
				<div class="j-row">
					<button type="submit" class="primary-btn multi-submit-btn">Send</button>
					<button type="button" class="primary-btn multi-next-btn">Next</button>
					<button type="button" class="secondary-btn multi-prev-btn">Back</button>
				</div>
			</div>
			<!-- end /.footer -->
		</form>
		<div class="security">
			<p style="margin-bottom: 0.0001pt; line-height: normal; text-align: center;"><em><span style="color: #333333;"><strong><span style="font-size: 10pt;">HCEN’s Information Security</span></strong></span></em></p>
			<p style="margin-bottom: 0.0001pt; line-height: normal; text-align: center;"><span style="font-size: 10pt;"><em><strong><span style="color: #333333;">HCEN WILL NOT</span>,</strong></em> make your information available to the public or ever resell your email. </span></p>
			<p style="margin-bottom: 0.0001pt; line-height: normal; text-align: center;"><span style="font-size: 10pt;">Your information is for the strict use of the HCEN Network of Staffing Agencies for information purposes only.</span></p>
		</div>
	</div>

	<script type="text/javascript">
		var isMobile = {
			Android: function() {
				return navigator.userAgent.match(/Android/i);
			},
			BlackBerry: function() {
				return navigator.userAgent.match(/BlackBerry/i);
			},
			iOS: function() {
				return navigator.userAgent.match(/iPhone|iPad|iPod/i);
			},
			Opera: function() {
				return navigator.userAgent.match(/Opera Mini/i);
			},
			Windows: function() {
				return navigator.userAgent.match(/IEMobile/i);
			},
			any: function() {
				return (isMobile.Android() || isMobile.BlackBerry() || isMobile.iOS() || isMobile.Opera() || isMobile.Windows());
			}
		};

		$(document).ready(function(){

			if( isMobile.any() ) {
				alert("mobile");
				$("#appform_frontendbundle_applicant_appOrigin").val("mobile");
			}
			$('#j-forms')
					.find('#appform_frontendbundle_applicant_personalInformation_licenseState')
					.chosen({
						width: '100%'
					})
					.change(function(e) {
						$("#j-forms").validate().element("#appform_frontendbundle_applicant_personalInformation_licenseState");
					});

			$('#j-forms')
					.find('#appform_frontendbundle_applicant_personalInformation_desiredAssignementState')
					.chosen({
						width: '100%'
					})
					.change(function(e) {
						$("#j-forms").validate().element("#appform_frontendbundle_applicant_personalInformation_desiredAssignementState");
					});

			// Single date with icon
			$(function() {
				// Test if this is a mobile device
				if (typeof $.browser == 'undefined') {
					$.browser = {};
				}
				$.browser.device = (/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(navigator.userAgent.toLowerCase()));
				if ($.browser.device) {
					$('#appform_frontendbundle_applicant_personalInformation_completion').attr('type', 'date');
				} else {
					// Datepicker for arrival date on filters
					var dp = $('#appform_frontendbundle_applicant_personalInformation_completion').datepicker(
							{
								dateFormat: 'yy-mm-dd',
								prevText: '<i class="fa fa-caret-left"></i>',
								nextText: '<i class="fa fa-caret-right"></i>'
							}
					)
					dp.on('changeDate', function(e) {
						dp.datepicker('hide');
					});
				}
			});

/*			$(function(){
				$("#appform_frontendbundle_applicant_personalInformation_completion").datepicker({
					dateFormat: 'yy-mm-dd',
					prevText: '<i class="fa fa-caret-left"></i>',
					nextText: '<i class="fa fa-caret-right"></i>'
				});
			});*/
			// Phone
			$("#appform_frontendbundle_applicant_personalInformation_phone").mask('(999)999-9999', {placeholder:'x'});

			if ($("#appform_frontendbundle_applicant_personalInformation_isOnAssignement").val() == '1') {
				$('#appform_frontendbundle_applicant_personalInformation_completion').removeAttr('disabled').parent().removeClass('disabled-view');
			}
			// Enabled input
			$('#appform_frontendbundle_applicant_personalInformation_isOnAssignement').on('change', function() {
				if ( this.value == '1') {
					$('#appform_frontendbundle_applicant_personalInformation_completion').attr('disabled', false).parent().removeClass('disabled-view error-view success-view');
				} else {
					$('#appform_frontendbundle_applicant_personalInformation_completion').attr('disabled', true).parent().addClass('disabled-view').removeClass('success-view error-view');
					if ( $('#enable-input-error').length ) {
						$('#enable-input-error').css('display', 'none');
					}
				};
			});
			$('input.default').css('width', '100%');
		});
	</script>
{% endblock %}
